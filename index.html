<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>your To-Do List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="/index.css">
</head>

<body>

    </div>
    <nav class="navbar navbar-expand-lg bg-body-tertiary mb-1">
        <div class="container-fluid">

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link disabled">History</a>
                    </li>
                </ul>
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>
    <div class="position-relative py-2 px-4 text-bg-dark border border-dark rounded-pill center mb-5">
        To-Do Lists <svg width="1em" height="1em" viewBox="0 0 16 16"
            class="position-absolute top-100 start-50 translate-middle mt-1" fill="var(--bs-dark)"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
        </svg>
    </div>
    <style>
        .center {
            text-align: center;
            justify-content: center;
            font-weight: 1000;
            font-size: 1.7rem;
            background-color: black;
            color: aliceblue;
        }
    </style>

    <div class="mb-3 ms-1">
        <label for="exampleInputEmail1" class="form-label">Task</label>
        <input type="text" class="form-control" id="Task" aria-describedby="emailHelp">
    </div>
    <div class="mb-3 ms-1 ">
        <label for="exampleInputPassword1" class="form-label">Due Date</label>
        <input type="date" class="form-control" id="Due Date">
    </div>
    <div class="mb-3 ms-1">
        <label for="exampleFormControlTextarea1" class="form-label">Notes</label>
        <textarea class="form-control" id="Notes" rows="3"></textarea>
    </div>
    <button type="submit" id="add" class="btn btn-primary mb-5 ms-1 ">Add to list</button>

    <div class="position-relative py-2 px-4 text-bg-dark border border-dark rounded-pill center mb-5">
        your Tasks <svg width="1em" height="1em" viewBox="0 0 16 16"
            class="position-absolute top-100 start-50 translate-middle mb-5" fill="var(--bs-dark)"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
        </svg>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">S.No.</th>
                <th scope="col">Task</th>
                <th scope="col">Status</th>
                <th scope="col">Due Date</th>
                <th scope="col">Notes</th>
                <th scope="col">Delete</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <tr>
                <th scope="row">index</th>
                <td>Mark</td>
                <td> <button class="btn btn-primary mb-5 ms-1 ">complete</button></td>
                <td>Otto</td>
                <td>@mdo</td>
                <td><button class="btn btn-primary mb-5 ms-1 ">Delete</button></td>
            </tr>

        </tbody>
    </table>
    
    <div class="position-relative py-2 px-4 text-bg-dark border border-dark rounded-pill center mb-5">
        Completed Tasks <svg width="1em" height="1em" viewBox="0 0 16 16"
            class="position-absolute top-100 start-50 translate-middle mb-5" fill="var(--bs-dark)"
            xmlns="http://www.w3.org/2000/svg">
            <path
                d="M7.247 11.14L2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z" />
        </svg>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">S.No.</th>
                <th scope="col">Task</th>
                <th scope="col">Status</th>
                <th scope="col">Due Date</th>
                <th scope="col">Notes</th>
               
            </tr>
        </thead>
        <tbody id="tableBodyofCompleted">
           

        </tbody>
    </table>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
        crossorigin="anonymous"></script>
    <script>
       
        function getAndUpdate()
        {
            console.log("adding...");
            task = document.getElementById('Task').value;
                date = document.getElementById('Due Date').value;
                note = document.getElementById('Notes').value;
            if (localStorage.getItem('itemsJson')==null){
                    itemJsonArray = [];
                    itemJsonArray.push([task,date,note]);
                    localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
                }
                else{
                    itemJsonArrayStr = localStorage.getItem('itemsJson')
                    itemJsonArray = JSON.parse(itemJsonArrayStr);
                    itemJsonArray.push([task,date,note]);
                    localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
                }
                update();
            
        }
        function update(){
            if (localStorage.getItem('itemsJson')==null){
                    itemJsonArray = []; 
                    localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
                } 
                else{
                    itemJsonArrayStr = localStorage.getItem('itemsJson')
                    itemJsonArray = JSON.parse(itemJsonArrayStr); 
                }
            let tableBody = document.getElementById("tableBody");
                let str = "";
                itemJsonArray.forEach((element, index) => {
                    str += `
                    <tr>
                    <th scope="row">${index + 1}</th>
                    <td>${element[0]}</td>
                     
                    <td> <button class="btn btn-primary mb-5 ms-1 "onclick="checked(${index})">Complete</button></td>
                    <td>${element[1]}</td> 
                    <td>${element[2]}</td> 
                    <td><button class="btn btn-primary mb-5 ms-1 "onclick="deleted(${index})">Delete</button></td>
                    </tr>`; 
                });
                tableBody.innerHTML = str;
        }
        function update2(itemIndex){
            if (localStorage.getItem('itemsJson')==null){
                    itemJsonArray = []; 
                    localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray))
                } 
                else{
                    itemJsonArrayStr = localStorage.getItem('itemsJson')
                    itemJsonArray = JSON.parse(itemJsonArrayStr); 
                }
            let tableBodyofCompleted = document.getElementById("tableBodyofCompleted");
                let str1 = "";
            
                    {
                        
                    str1 += `
                    <tr>
                        
                    <th scope="row">1</th>
                    <td>${itemJsonArray[itemIndex][0]}</td>
                    <td> <button class="btn btn-primary mb-5 ms-1 ">Complete</button></td>
                    <td>${itemJsonArray[itemIndex][1]}</td> 
                    <td>${itemJsonArray[itemIndex][2]}</td> 
                    </tr>`; 
                }
                tableBodyofCompleted.innerHTML +=str1;
        }
        add = document.getElementById("add");
        checking = document.getElementById("checking");
        add.addEventListener("click", getAndUpdate);
        update();
        function deleted(itemIndex){
                console.log("Delete", itemIndex);
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
                // Delete itemIndex element from the array
                itemJsonArray.splice(itemIndex, 1);
                localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray));
                update();

            }
            function checked(itemIndex){
                console.log("check", itemIndex);
                itemJsonArrayStr = localStorage.getItem('itemsJson')
                itemJsonArray = JSON.parse(itemJsonArrayStr);
                update2(itemIndex);
                // Delete itemIndex element from the array
                itemJsonArray.splice(itemIndex, 1);
                localStorage.setItem('itemsJson', JSON.stringify(itemJsonArray));
               
                update();
                

            }
    </script>
</body>

</html>